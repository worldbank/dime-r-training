<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Session 6: Introduction to R Markdown</title>
    <meta charset="utf-8" />
    <meta name="author" content="Luiza Andrade, Marc-Andrea Fiorina, Rob Marty, Rony Rodriguez-Ramirez, Luis Eduardo San Martin, Leonardo Viotti" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/xaringanExtra-webcam/webcam.js"></script>
    <script id="xaringanExtra-webcam-options" type="application/json">{"width":"200","height":"200","margin":"1em"}</script>
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"<i class=\"fa fa-check\" style=\"color: #90BE6D\"><\/i>","error":"<i class=\"fa fa-times-circle\" style=\"color: #F94144\"><\/i>"})</script>
    <link href="libs/font-awesome/css/all.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
    <link rel="stylesheet" href="libs/remark-css/default.css" type="text/css" />
    <link rel="stylesheet" href="libs/remark-css/metropolis.css" type="text/css" />
    <link rel="stylesheet" href="libs/remark-css/metropolis-fonts.css" type="text/css" />
    <link rel="stylesheet" href="libs/remark-css/custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Session 6: Introduction to R Markdown
]
.subtitle[
## R for Stata Users
]
.author[
### Luiza Andrade, Marc-Andrea Fiorina, Rob Marty, Rony Rodriguez-Ramirez, Luis Eduardo San Martin, Leonardo Viotti
]
.date[
### The World Bank â€“ DIME | <a href="https://github.com/worldbank">WB Github</a> <br> March 2023
]

---




&lt;style type="text/css"&gt;
@media print {
  .has-continuation {
    display: block !important;
  }
}

.remark-slide-content {
    font-size: 30px;
}
&lt;/style&gt;

# Preamble

- Make sure you have the packages `tinytex`, `stargazer`, and `huxtable` installed


```r
# Packages we used for other sessions, install only if needed
install.packages("dplyr")
install.packages("huxtable")

# New packages
install.packages("tinytex")
install.packages("stargazer")

# No need to load the packages for now
```

---

# Preamble &lt;font size="5"&gt;(<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"/></svg> 5 min)&lt;/font&gt;

- Use `tinytex` to install LaTeX
- If you're using a WB computer:

1. Download this file: https://osf.io/sehzg
1. Run `tinytex:::install_prebuilt("location/to/file.zip")` (notice the triple colon)

- If you're not:

1. Run `tinytex::install_tinytex()`

---

# Preamble

This will take a while. Leave it running

&lt;img src="img/r-markdown/installing-tinytex.png" width="80%" style="display: block; margin: auto;" /&gt;

---

# Preamble

- LaTeX can be unpredictable in WB computers. It's possible that this didn't work
- Don't worry for now, just follow the approppriate instructions we'll specify in the exercises

---

# Introduction

- This is an **introduction** to R Markdown
- We'll show:
  1. How to write and knit (output) R Markdown documents
  2. How to format text and R code in R Markdown documents
  3. How to include regression tables in R Markdown documents

---

# Table of contents

1. [Dynamic documents](#dynamic-documents)
2. [Knitting](#knitting)
3. [Markdown](#markdown)
4. [R code](#r-code)
5. [R plots](#r-plots)
6. [Inline code](#r-inline-code)
7. [Regression outputs](#regression-outputs)
8. [Annex](#annex)

---

class: inverse, center, middle
name: dynamic-documents

# Dynamic documents

&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#D38C28' size=1px width=1100px&gt;&lt;/html&gt;

---

# Dynamic documents and R Markdown

- Dynamic documents are documents that include both text and code outputs
- They are generated by a script and are updated automatically every time the script runs
- R Markdown is a type of dynamic document

---

# Dynamic documents

- Code and documentation is produced together

&lt;img src="img/dynamic-docs-in-R.png" width="100%" style="display: block; margin: auto;" /&gt;

---

# Why use dynamic documents?

- Increased research transparency. Documents are fully reproducible
- No more copying and pasting outputs from R to a document editor
- Nice option for simple documents that don't require a lot of formatting
- Can include code snippets

---

class: inverse, center, middle
name: knitting

# Knitting R Markdown documents

&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#D38C28' size=1px width=1100px&gt;&lt;/html&gt;

---

# Knitting R Markdown documents

- R markdown combines text, R code, and rendered outputs
- The text follows Markdown's syntax
- The code and outputs follow R's syntax
- Knitting an R Markdown document is rendering the text and code portions into a single output
- The output can be a PDF, Word, or HTML document

---

# Knitting R Markdown documents

.exercise[
## Exercise 1: Knit an R Markdown document &lt;font size="5"&gt;(<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"/></svg> 2 min, leave it running)&lt;/font&gt;

1. Go to the course repository: https://osf.io/86g3b/
2. In the files panel, download `R for Stata Users - 2023 March` &gt; `scripts` &gt; `r-markdown-template.Rmd`
3. Open this file in RStudio
  + If the installation of tinytex didn't work, change line 2 to: `output: html_document`
4. Click on `Knit`. If RStudio asks you to update some packages, select `Yes`
]

---

# Knitting R Markdown documents

Note that this might take a while

&lt;img src="img/r-markdown/rendering.png" width="70%" style="display: block; margin: auto;" /&gt;

We'll continue with markdown syntax while it finishes

---

class: inverse, center, middle
name: markdown

# Markdown

&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#D38C28' size=1px width=1100px&gt;&lt;/html&gt;

---

# Markdown

- The text part of R Markdown follows the syntax of Markdown
- Markdown is a "light" markup language. It's similar to Latex or HTML, but simpler
- Markdown was designed to be easily readable while allowing to format text and document sections

---

# Markdown - Headers

- Headers in markdown are preceded by pound (`#`) symbols
- Additional pound symbols denote a lower level in the headers hierarchy

&lt;img src="img/r-markdown/markdown-headers.png" width="100%" style="display: block; margin: auto;" /&gt;

---

# Markdown - Paragraphs

- Text not preceded by special symbols are regular paragraphs.

&lt;img src="img/r-markdown/markdown-paragraphs.png" width="70%" style="display: block; margin: auto;" /&gt;

---

# Markdown - Text emphasis

- Emphasized text is enclosed by special symbols.

&lt;img src="img/r-markdown/markdown-text-emphasis.png" width="70%" style="display: block; margin: auto;" /&gt;

---

# Markdown - Lists

- Markdown allows us to use both ordered and unordered lists.

&lt;img src="img/r-markdown/markdown-ordered-lists.png" width="60%" style="display: block; margin: auto;" /&gt;

---

# Markdown - Lists

- Markdown allows us to use both ordered and unordered lists.

&lt;img src="img/r-markdown/markdown-unordered-lists.png" width="70%" style="display: block; margin: auto;" /&gt;

---

# Markdown - Links

- We can also include links as text in Markdown.

&lt;img src="img/r-markdown/markdown-links.png" width="60%" style="display: block; margin: auto;" /&gt;

---

# Markdown - Tables

- Lastly, we can include tables in Markdown text.

&lt;img src="img/r-markdown/markdown-tables1.png" width="65%" style="display: block; margin: auto;" /&gt;

---

# Markdown - Tables

- Lastly, we can include tables in Markdown text.

&lt;img src="img/r-markdown/markdown-tables2.png" width="65%" style="display: block; margin: auto;" /&gt;

---

# Exercise 1 results

- If exercise 1 worked, you'll now see this PDF file (or HTML) in the folder where you saved `r-markdown-template.Rmd`

&lt;img src="img/r-markdown/rendered-docs.png" width="50%" style="display: block; margin: auto;" /&gt;

- If it's still running, let it run until it finishes
- If it failed, try again after changing `output: html_document` in line 2

---

class: inverse, center, middle
name: r-code

# R Code

&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#D38C28' size=1px width=1100px&gt;&lt;/html&gt;

---

# Including R code

- R code in R Markdown goes inside **fenced code blocks**, as the one below

````
```{r}
# Your R code goes here
```
````

---

# Including R code

- To add new block, you can type the fences directly, go to `Insert` &gt; `R` in the script panel of RStudio, or type `CTRL` + `ALT` + `i`

&lt;img src="img/r-markdown/insert-new-r-fenced-block.png" width="80%" style="display: block; margin: auto;" /&gt;

---

# Including R code

.exercise[
## Exercise 2: Include the summary of a variable &lt;font size="5"&gt;(<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"/></svg> 2 min)&lt;/font&gt;

1. Create a header named `R Code` at the bottom of `r-markdown-template.Rmd`
2. Create a new fenced code block where you load the dataset `mtcars`
  + `mtcars` is a built-in dataset. Load it with: `data(mtcars)`
3. Inside the same block, get the summary of the variable `mpg` with `summary(mtcars$mpg)`
4. Knit. You'll have to close the PDF document if you have it opened
]

---

# Including R code

````
## R Code

```{r}
data(mtcars)
summary(mtcars$mpg)
```
````

---

# Including R code

&lt;img src="img/r-markdown/r-markdown-r-code.png" width="80%" style="display: block; margin: auto;" /&gt;

---

# Including R code

- Note that the output echoes both the code and the output
- What if we wanted to include the output but not the code?
- We use the argument `echo = FALSE` in the fenced code block for that
- Code block arguments are separated by commas inside the curly brackets, as in: `{r, echo = FALSE}`

---

# Including R code

.exercise[
## Exercise 3: Omit the code when knitting R code &lt;font size="5"&gt;(<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"/></svg> 1 min)&lt;/font&gt;

1. Add the option `echo = FALSE` to the fenced code block created in exercise 2
2. Knit the document and see how it's different now
]

---

# Including R code

````
```{r, echo = FALSE}
data(mtcars)
summary(mtcars$mpg)
```
````

---

# Including R code

&lt;img src="img/r-markdown/r-markdown-r-code-echo-F.png" width="80%" style="display: block; margin: auto;" /&gt;

---

# Including R code

- To include only R code but not the output, we use the option `eval = FALSE`

````
```{r, eval = FALSE}
data(mtcars)
summary(mtcars$mpg)
```
````

---

# Including R code

&lt;img src="img/r-markdown/r-markdown-r-code-eval-F.png" width="80%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle
name: r-plots

# R Plots

&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#D38C28' size=1px width=1100px&gt;&lt;/html&gt;

---

# Including R plots

- Adding R plots is similar to adding R code
- Include the code producing the plot in a fenced block
- The block option `echo = FALSE` is useful when we only want to include the plot but not the code producing it

---

# Including R plots

.exercise[
## Exercise 4: Include an R plot in your document &lt;font size="5"&gt;(<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"/></svg> 2 min)&lt;/font&gt;

1. Create a header named `R Plots`
2. Create a new fenced code block with the option `echo = FALSE`
3. Add the following code inside the new block:


```r
plot(mtcars$wt,
     mtcars$mpg,
     main = "Plot example",
     xlab = "Car weight",
     ylab = "Miles per gallon")
```
]

---

# Including R plots

````
# R plots

```{r, echo = FALSE}
plot(mtcars$wt,
     mtcars$mpg,
     main = "Plot example",
     xlab = "Car weight",
     ylab = "Miles per gallon")
```
````

---

# Including R plots

&lt;img src="img/r-markdown/r-markdown-r-plots.png" width="60%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle
name: r-inline-code

# Inline code

&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#D38C28' size=1px width=1100px&gt;&lt;/html&gt;

---

# Including code inline

- Inline code  is enclosed by backtick followed by an r (``r`) and a single backtick
- For example:

~~~
The mean of mpg is `r mean(mtcars$mpg)`.
~~~

- Will be rendered as:

````
The mean of mpg is 20.090625.
````

---

# Including code inline

.exercise[
## Exercise 5 &lt;font size="5"&gt;(<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"/></svg> 2 min)&lt;/font&gt;

1. Create a new header named `Inline code` in `markdown-template.Rmd`
2. Add an unordered list with the following text and include inline R code to render the corresponding numbers in each case
  + The number of elements in mtcars is: (use function `nrow(mtcars)`)
  + The mean of weight is: (use function `mean(mtcars$wt)`)
  + The standard deviation is: (use function `sd(mtcars$wt)`)
]

---

# Including code inline

~~~
# Inline code

- The number of elements in mtcars is `r nrow(mtcars)`
- The mean of weight is `r mean(mtcars$wt)`
- The standard deviation is `r sd(mtcars$wt)`
~~~

---

# Including code inline

&lt;img src="img/r-markdown/r-markdown-inline-code.png" width="80%" style="display: block; margin: auto;" /&gt;

---

# Including code inline

You can use the function `round()` to control the number of decimals displayed.

~~~
# Inline code

- The number of elements in mtcars is `r nrow(mtcars)`
- The mean of weight is `r round(mean(mtcars$wt), 1)`
- The standard deviation is `r round(sd(mtcars$wt), 2)`
~~~

---

# Including code inline

You can use the function `round()` to control the number of decimals displayed.

&lt;img src="img/r-markdown/r-markdown-inline-code-rounded.png" width="80%" style="display: block; margin: auto;" /&gt;

---

# Including code inline

You can also combine R inline code with the markdown syntax for tables to produce statistics tables.

~~~
# Inline code in tables

|Column: weight| Value                       |
|--------------|-----------------------------|
|N             |`r nrow(mtcars)`             |
|Mean          |`r round(mean(mtcars$wt), 1)`|
|SD            |`r round(sd(mtcars$wt), 2)`  |
~~~

---

# Including code inline

You can also combine R inline code with the markdown syntax for tables to produce statistics tables.

&lt;img src="img/r-markdown/r-markdown-tables-inline-code.png" width="55%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle
name: regression-outputs

# Including regression outputs

&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#D38C28' size=1px width=1100px&gt;&lt;/html&gt;

---

# Including regression outputs

- In a previous session, we saw that we can produce regression tables in LaTeX
- We can use code producing LaTeX outputs along with the code block option `results = "asis"` to display them in the knitted document

---

# Including regression outputs - Stargazer

- First, we'll start with the function `stargazer()` from the package `stargazer`
- The first argument of `stargazer()` is a regression result
- We also include the arguments `echo = FALSE` and `message = FALSE` in the code block to omit printing the code and messages that appear when loading stargazer
- In `stargazer()` we include `header = FALSE` to omit printing stargazer metadata

**Important:** When using external packages in RMarkdown, you need to have them loaded in a code block regardless of if they're already loaded in your current session. Libraries have to load again for each knit.

---

# Including regression outputs - Stargazer

````
```{r, echo = FALSE, message = FALSE, results = "asis"}
# Loading stargazer
library(stargazer)

# Creating a simple regression
model &lt;- lm(mpg ~ cyl + hp, data = mtcars)

# Printing it with stargazer
stargazer(model, header = FALSE) # add: type = "html" if knitting to HTML
```
````

---

# Including regression outputs - Stargazer

&lt;img src="img/r-markdown/r-markdown-stargazer.png" width="95%" style="display: block; margin: auto;" /&gt;

---

# Including regression outputs - Stargazer

.exercise[
## Exercise 6 &lt;font size="5"&gt;(<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"/></svg> 3 min)&lt;/font&gt;

1. Create a new header named `Regressions - Stargazer` in `r-markdown-template.Rmd`
1. Add a new code block with the arguments `echo = FALSE` and `results = "asis"`
1. Load stargazer in the code block
1. Add a regression of the variable `mpg` on `wt` and `hp`
1. Use stargazer's arguments `header = FALSE`, `title = "your_title"` and `omit = c("Constant")` to customize your table
  + If your output is HTML instead of PDF, include the argument `type = "html"` in `stargazer()`
]

---

# Including regression outputs - Stargazer

````
# Regressions - Stargazer

```{r, echo = FALSE, message = FALSE, results = "asis"}
library(stargazer)
model &lt;- lm(mpg ~ wt + hp, data = mtcars)
stargazer(model,
          header = FALSE,
          title = "Best table ever",
          omit = c("Constant"))
```
````

---

# Including regression outputs - Stargazer

&lt;img src="img/r-markdown/stargazer-exercise.png" width="55%" style="display: block; margin: auto;" /&gt;

---

# Including regression outputs - Huxtable

- Remember `huxtable`? we can also use it to include regression tables in R Markdown
- The advantage of using `huxtable` compared to `stargazer` is that we don't have to define the type of output we're generating with R Markdown. `huxtable` automatically detects it and will transform the output as needed in the resulting document
- `huxtable` has an important disadvantage, though: it requires to install external libraries in your local LaTeX installation

---

# Including regression outputs - Huxtable

- Conveniently, the library `huxtable` has a function that handles that installation for us (needed only if you're knitting to PDF)


```r
# Only if you're knitting to PDF:
huxtable::install_latex_dependencies()
```

- Once this finishes, we can use `huxtable` with R Markdown

---

# Including regression outputs - Huxtable

- For regressions, we use the function `huxreg()` as in the example below
- Note that the option `results = "asis"` is not used with `huxtable`

````
```{r, echo = FALSE, warning = FALSE}
library(huxtable)
model &lt;- lm(mpg ~ wt + hp, data = mtcars)
huxreg(model)
```
````

---

# Including regression outputs - Huxtable

- For regressions, we use the function `huxreg()` as in the example below
- Note that the option `results = "asis"` is not used with `huxtable`

&lt;img src="img/r-markdown/rmarkdown-huxtable-regression.png" width="75%" style="display: block; margin: auto;" /&gt;

---

# Including regression outputs - Huxtable

.exercise[
## Exercise 7: Now with Huxtable &lt;font size="5"&gt;(<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"/></svg> 2 min)&lt;/font&gt;

1. Create a new header named `Regressions - Huxtable` in `r-markdown-template.Rmd`
1. Add a new code block with the argument `echo = FALSE`
1. Load huxtable in the code block
1. Add a regression table of the variable `mpg` on `wt` and `hp` using `huxreg()`
1. Use huxreg's argument `omit_coefs = c("(Intercept)")` to customize your table
]

---

# Including regression outputs - Huxtable

````
# Regressions - Huxtable

```{r, echo = FALSE, warning = FALSE}
library(huxtable)
model &lt;- lm(mpg ~ wt + hp, data = mtcars)
huxreg(model,
       omit_coefs = c("(Intercept)"))
```
````

---

# Including regression outputs - Huxtable

&lt;img src="img/r-markdown/huxtable-exercise.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# Including regression outputs - Huxtable

- If you want to include a title in your regression, use the command `set_caption()` with the result of `huxreg()` as argument

````
```{r, echo = FALSE, warning = FALSE}
library(huxtable)
library(dplyr)
model &lt;- lm(mpg ~ wt + hp, data = mtcars)
table &lt;- huxreg(model,
       omit_coefs = c("(Intercept)"))
table %&gt;% set_caption("Another nice table")
```
````

---

# Including regression outputs - Huxtable

&lt;img src="img/r-markdown/huxtable-with-title.png" width="45%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle

# Thank you!

---

class: inverse, center, middle
name: annex

# Annex

&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#D38C28' size=1px width=1100px&gt;&lt;/html&gt;

---

# Annex - Opening a new R Markdown in R Studio

- Go to `File` &gt; `New File` &gt; `R Markdown`
- You can register the author name and the document title. This can be changed later if needed
- You can also define the default output format (HTML, PDF, Word). This can also be changed later
- Selecting `OK` will generate a template with document sections and code blocks that you can modify
- Selecting `Create Empty Document` will ignore the author, title, and output format registered and will result in a completely blank R Markdown document

---

# Annex - Author, title, and output type

- The section enclosed in `---` at the beginning of the document can contain the author, title, and default output format
- You can add the author and document title with `author: NAME` and `title: TITLE`
- You can also change the default output format. Some options are:
  + `output: html_document`
  + `output: pdf_document`
  + `output: word_document`
  + `output: beamer_presentation`

---

# Annex - Naming R code blocks

- You can name R code blocks if you add the name after the `r` in the initial brackets
- The example below has the name `my-r-code`

````
```{r my-r-code}
summary(mtcars$mpg)
```
````

---

# Annex - Naming R code blocks

- This is very convenient to debug code blocks by clicking on `Output` under the `R Markdown` tab of the console, in case your file has an error


&lt;img src="img/r-markdown/error.png" width="75%" style="display: block; margin: auto;" /&gt;

---

# Annex - Including images

- The Markdown syntax to include images is: `![Image name](path/to/image)`
- For example:

````
![R logo](img/r-markdown/r-logo.jpg)
````

- Renders:

![R logo](img/r-markdown/r-logo.jpg)

---

# Annex - Including a LaTeX preamble in a PDF doc

- If you want to further customize a PDF document in R Markdown and you're familiar with LaTeX, you can include a LaTeX preamble that will be executed when you knit your document
- To enable this feature, replace `output: pdf_document` with the following code in the section enclosed by the three dashes (`---`) at the beginning of your document

```
output:
  pdf_document:
    includes:
      in_header: "preamble.tex"
```

---

# Annex - Looking ahead

- [Markdown guide](https://www.markdownguide.org/)
- [R Markdown: The Definitive Guide](https://bookdown.org/yihui/rmarkdown/basics.html)
- [An introduction to Stata Markdown](https://osf.io/nam2d/)
- [Stargazer official manual](https://cran.r-project.org/web/packages/stargazer/stargazer.pdf)
- [Introduction to Huxtable](https://cran.r-project.org/web/packages/huxtable/vignettes/huxtable.html)
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
